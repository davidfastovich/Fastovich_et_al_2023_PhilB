[![DOI](https://zenodo.org/badge/635942533.svg)](https://zenodo.org/badge/latestdoi/635942533)

# All analyses for Fastovich et al., (2023), Philosophical Transaction of the Royal Society B

This is all code used to generate all figures and tables in the main manuscript as they appear in the paper. However, I am unable to redistribute some of the model simulations used and species range maps from [BirdLife](http://datazone.birdlife.org/species/requestdis) and the [IUCN Red List](https://www.iucnredlist.org/resources/spatial-data-download) within this repository. Accordingly, only the species richness rasters are provided. For the climate model output, I can share the data with researchers who are interested by email, so feel free to reach out at dfastovi@syr.edu. For the range maps there is an alternative. Data from the IUCN is readily available online after creating an account and following a simple processes and range maps from BirdLife can be accessed after filling out a form and waiting a week, or so, for review by BirdLife staff. Once all data is put into the appropriate folders `species_data`, `model_temperature_anomaly/`, and `model_precipitation_anomaly`, run the `run_scripts.sh` file and all code should execute.

`run_scripts.sh` assumes that you are running this on a Mac with zsh as the default terminal and will install [micromamba](https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html) to duplicate the R and Python environments which produced these results. With some minor tweaks `run_scripts.sh` will also work in most Debian based Linux distros and CentOS.

All results and final figures for the manuscript are location in the `figures` and `skill_score` folders. Feel free to use these figures as you see fit, but please be sure to cite the original publication.

Lastly, when I was developing this code I was using two separate conda environments for the R code and the Python code. I have saved the conda environments and installed R packages in `/environments/installed_packages_r.csv`, `/environments/environment_r.yml`, and `/environments/environment_python.yml`. Before publishing this repository, I attempted to combine these two environments into a single conda environment that can run all of the Python and R code for simplicity (`/environments/environment_combined.yml`). The environment builds and the code runs however, I strongly recommend using the original environments to reproduce my results. Use `/environments/environment_r.yml` to build an conda R environment with `/environments/installed_packages_r.csv` dictating which packages and versions to install for all R code. For the Python code, build a conda environment with `/environments/environment_python.yml`.
